<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Graphalicious Demo</title>
    <script src="crystal.js"></script>
    <script src="../build.js"></script>
    <script type="text/javascript">
    var gl = window.graphalicious;
    var sv;
    var lastScrollOffset = 0;
    window.addEventListener('load', function() {
      var canvas = new gl.Canvas();
      var colorScheme = new gl.ColorScheme('#65bcd4');

      sv = new gl.ScrollView(canvas, colorScheme);
      sv.on('draw', simpleContent.bind(null, sv));
      sv.on('scroll', simpleContent.bind(null, sv));

      document.body.appendChild(canvas.element());
      canvas.element().style.width = '300px';
      canvas.element().style.height = '200px';
      canvas.layout();
    });

    function simpleContent(scrollView) {
      if (scrollView.isScrollingEnabled()) {
        lastScrollOffset = scrollView.getPixelsScrolled();
      }
      
      var vp = scrollView.contentViewport();
      vp.enter();
      vp.context().fillStyle = 'white';
      vp.context().fillRect(0, 0, vp.width(), vp.height());
      vp.context().fillStyle = 'black';
      vp.context().font = '16pt sans-serif';
      for (var i = 0; i < 150; i += 20) {
        vp.context().fillText('offset by '+(i*6), 10 - lastScrollOffset + i*6, 26 + i);
      }
      vp.leave();
    }

    function toggleScrolls() {
      if (sv.isScrollingEnabled()) {
        sv.disableScrolling();
      } else {
        sv.enableScrolling(1000, 700, lastScrollOffset);
      }
    }
    </script>
  </head>
  <body style="background-color: #f0f0f0">
    <button onclick="toggleScrolls()">Toggle Scrolls</button><br>
  </body>
</html>
